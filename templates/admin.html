<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="csrf-token" content="{{ csrf_token() }}">
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.ico') }}" sizes="any">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='images/favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='images/site.webmanifest') }}">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <meta http-equiv="refresh" content="60">
</head>
<body>
    <div class="container">
        <header>
            <h1>–ê–¥–º–∏–Ω—Å–∫–∞—è —á–∞—Å—Ç—å</h1>
            <a href="/" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ü—É–±–ª–∏—á–Ω—É—é –≤–µ—Ä—Å–∏—é</a>
        </header>

        <div class="card-deck">
            <div class="info-card">
                <h2>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é</h2>
                <p><strong>–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏:</strong> {{ config.CHECK_INTERVAL or 'N/A' }}s</p>
                <p><strong>–ü–æ–≤—Ç–æ—Ä—ã:</strong> {{ config.CHECK_RETRIES or 'N/A' }}</p>
                <p><strong>–†–∞–∑–∑ –≤ —Å–∫–æ–ª—å–∫–æ –ø–æ–≤—Ç–æ—Ä:</strong> {{ config.CHECK_RETRY_DELAY or 'N/A' }}s</p>
                <p><strong>–¢–∞–π–º–∞—É—Ç:</strong> {{ config.CHECK_SINGLE_TIMEOUT or 'N/A' }}s</p>
                <p><strong>Failure Threshold:</strong> {{ config.FAILURE_THRESHOLD or 'N/A' }}</p>
            </div>
             <div class="info-card">
                <h2>–ò—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ</h2>
                <p><strong>–ö–æ–Ω—Ç–∞–∫—Ç—ã –∞–¥–º–∏–Ω–∞:</strong> @{{ config.TELEGRAM_TAG or 'N/A' }}</p>
            </div>
        </div>

        <h2>–ü—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ —Å–µ—Ä–≤–µ—Ä–∞</h2>
        <div class="server-list">
             {% for server in servers %}
                <div class="server-card">
                    <div class="status-icon {% if server.is_alive %}online{% else %}offline{% endif %}"></div>
                    <div class="server-info">
                        <span class="server-name">
                           {{ 'üåç' if server.is_public else 'üîí' }}
                           {{ server.name }}
                        </span>
                        <span class="server-host">{{ server.host }}:{{ server.port }}</span>
                    </div>
                    <div class="server-stats">
                        <span class="ping">{{ server.latency_ms if server.latency_ms != -1 else 'N/A' }} ms</span>
                        <span class="last-checked">
                            –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: 
                            {% if server.last_checked %}
                                {{ datetime.fromisoformat(server.last_checked).astimezone(moscow_tz).strftime('%Y-%m-%d %H:%M:%S') }} From Rezerv
                            {% else %}
                                –ù–∏–∫–æ–≥–¥–∞
                            {% endif %}
                        </span>
                    </div>
                </div>
            {% endfor %}
        </div>
        <footer>
           –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–Ω–≥–∞, –ê–¥–º–∏–Ω—Å–∫–∞—è —á–∞—Å—Ç—å
        </footer>
    </div>
</body>
</html